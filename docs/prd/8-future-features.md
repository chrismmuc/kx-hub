# 8. Future Features & Backlog

This section captures potential features and enhancements for future iterations beyond the MVP.

## Post-MVP Feature Ideas

### 8.1 Additional Data Sources

#### 8.1.1 DayOne Journal Import
**Status:** Idea
**Priority:** Medium
**Complexity:** Medium

**Description:**
Import personal journal entries from the DayOne app to include in the knowledge base alongside Readwise highlights.

**Technical Approach:**
- DayOne has no public API
- Implementation via **local file upload**:
  - User exports DayOne journal as JSON (DayOne supports JSON export)
  - Upload JSON file to Cloud Storage bucket (e.g., `gs://kx-hub-uploads/dayone/`)
  - Cloud Function triggered on file upload
  - Parse DayOne JSON format and normalize to standard markdown
  - Store in `gs://kx-hub-markdown-normalized/journal/{id}.md`
  - Process through existing embedding pipeline

**Frontmatter Schema for Journal Entries:**
```yaml
---
id: "dayone-{uuid}"
title: "Journal Entry - {date}"
source: "dayone"
type: "journal"
created_at: "{timestamp}"
updated_at: "{timestamp}"
tags: ["journal", "{mood}", "{location}"]
location: "{lat},{lng}" (if available)
weather: "{weather}" (if available)
photos: ["photo1.jpg", "photo2.jpg"] (if available)
entry_count: 1
---
```

**Considerations:**
- Privacy: Journal entries are highly personal - ensure proper access controls
- Photo handling: DayOne entries may include photos - decide if/how to store
- Deduplication: Prevent duplicate imports
- Date range selection: Allow users to select which date ranges to import
- Incremental updates: Support importing new entries without re-uploading everything

**Dependencies:**
- Story 1.2 (normalization pipeline) ‚úÖ Complete
- Story 1.3 (embedding & storage) - Future

**Estimated Effort:** 2-3 days

---

### 8.2 Intelligent Content Discovery

#### 8.2.1 Current Article Recommendations & Follow-ups
**Status:** Idea
**Priority:** High
**Complexity:** High

**Description:**
Proactively search for and propose current articles that build upon or follow up on existing knowledge base content. Combine with cross-topic detection to discover interesting connections and validate what's already available.

**Key Capabilities:**

1. **Follow-up Detection:**
   - Analyze existing highlights/articles to identify key topics, authors, concepts
   - Use web search APIs (Google Custom Search API, Bing Search API) to find recent articles
   - Filter for articles published after the original highlight date
   - Rank by relevance and novelty

2. **Cross-Topic Connection Discovery:**
   - Use semantic embeddings to find unexpected connections between clusters
   - Example: "This article about urban planning mentions concepts from your behavioral psychology cluster"
   - Surface articles that bridge multiple existing clusters

3. **Knowledge Gap Analysis:**
   - Identify topics with many questions but few answers
   - Suggest articles that fill these gaps
   - Example: "You have 10 highlights questioning X, here are 3 recent articles explaining X"

4. **Validation & Verification:**
   - Check if recommended content already exists in knowledge base
   - Detect near-duplicates (same article from different sources)
   - Flag contradictions or updates to outdated information

**Technical Approach:**

```
1. Scheduled Job (weekly):
   ‚Üì
2. Extract key entities/topics from recent highlights
   ‚Üì
3. Generate search queries (Gemini LLM)
   ‚Üì
4. Web Search API calls (Google Custom Search)
   ‚Üì
5. Candidate article URLs
   ‚Üì
6. Fetch article content (web scraping/API)
   ‚Üì
7. Embed article snippets (Vertex AI)
   ‚Üì
8. Semantic similarity matching
   ‚Üì
9. Rank by: relevance, recency, novelty, cross-cluster connections
   ‚Üì
10. Store recommendations in Firestore
    ‚Üì
11. Present in weekly digest email OR query interface
```

**Data Model Extensions:**

**Firestore `kb_recommendations` collection:**
```javascript
{
  recommendation_id: "rec-{uuid}",
  type: "follow_up" | "cross_topic" | "gap_fill" | "update",
  title: "Article title",
  url: "https://...",
  source: "google_search" | "twitter" | "reddit",
  published_date: "2024-10-19",
  related_items: ["item-123", "item-456"], // IDs from kb_items
  related_clusters: ["cluster-ai", "cluster-psychology"],
  connection_explanation: "This article discusses...", // Generated by LLM
  similarity_score: 0.87,
  novelty_score: 0.92,
  status: "pending" | "accepted" | "rejected" | "saved",
  created_at: "2024-10-19T10:00:00Z"
}
```

**Configuration (`config/settings.yml`):**
```yaml
content_discovery:
  enabled: true
  schedule: "0 9 * * SUN"  # Weekly on Sunday 9am
  max_recommendations_per_week: 10
  min_similarity_score: 0.75
  search_apis:
    - provider: "google_custom_search"
      api_key_secret: "/kx-hub/google-search/api-key"
      cx: "your-search-engine-id"
      max_results: 20
  lookback_days: 30  # Only process highlights from last 30 days
  cross_cluster_threshold: 0.70  # Similarity threshold for cross-cluster connections
```

**User Experience:**

1. **Weekly Digest Section:**
   ```
   ## üìö Recommended Reading

   ### Follow-ups to Your Highlights
   - "The Future of AI Regulation (2024)" - Builds on your highlights from "AI Ethics"
   - "New Research on Sleep Quality" - Updates your notes from "Why We Sleep"

   ### Interesting Connections
   - "Urban Design for Mental Health" - Bridges your clusters: Architecture + Psychology
   ```

2. **Query Interface:**
   ```
   > query "AI regulation"

   Results:
   1. [Your highlights] Article: "AI Ethics Principles" (2023)
   2. [Recommended] "The Future of AI Regulation" (2024) ‚≠ê NEW
      ‚Üí Builds on your existing highlights, published 6 months later
   ```

3. **Push to Readwise Reader:**
   - Automatically add recommended articles to Readwise Reader queue
   - Use Readwise Reader API to save URLs
   - Tag recommendations with: `kx-hub-recommended`, `follow-up`, or `cross-topic`
   - Batch save to avoid API rate limits
   - User can read/highlight in Reader, which feeds back into the pipeline

**Readwise Reader API Integration:**

The recommendations can be pushed directly to your Readwise Reader queue, creating a closed-loop system where:
1. You highlight articles in Reader
2. System finds follow-up articles
3. System pushes recommendations back to Reader
4. You read and highlight recommended articles
5. Cycle continues with deeper knowledge building

**API Configuration:**
```yaml
readwise_reader:
  api_key_secret: "/kx-hub/readwise-reader/api-key"
  auto_push_recommendations: true
  max_push_per_week: 10
  tags: ["kx-hub-recommended"]
```

**Reader API Endpoint:**
```
POST https://readwise.io/api/v3/save/
Headers:
  Authorization: Token {api_key}
Body:
  {
    "url": "https://article-url.com",
    "tags": ["kx-hub-recommended", "follow-up"],
    "category": "article",
    "location": "new"  // Adds to "New" section
  }
```

**Flow:**
```
Weekly Discovery Job
    ‚Üì
Generate Recommendations
    ‚Üì
Store in Firestore (kb_recommendations)
    ‚Üì
[Optional] Push to Readwise Reader API
    ‚Üì
User reads in Reader app
    ‚Üì
User highlights ‚Üí Readwise API
    ‚Üì
Daily Ingest picks up highlights
    ‚Üì
Cycle continues
```

This creates a **self-reinforcing knowledge loop** where the system actively feeds you relevant content in your existing reading workflow.

**API Costs Estimate:**
- Google Custom Search API: $5/1000 queries, ~100 queries/week = ~$2/month
- Article content fetching: Web scraping (free) or diffbot.com API ($0.25/1000 pages)
- LLM for query generation + explanations: ~500 tokens/week √ó $0.075/1M tokens = negligible

**Total Additional Cost:** ~$2-3/month

**Considerations:**
- **Rate Limiting:** Web search APIs have daily quotas
- **Content Quality:** Filter out low-quality content (clickbait, paywalls)
- **User Feedback Loop:** Allow users to mark recommendations as helpful/not helpful
- **Privacy:** Don't send personal journal entries to external search APIs
- **Deduplication:** Complex - same article may have multiple URLs
- **Freshness vs Relevance:** Balance between very recent and highly relevant

**Dependencies:**
- Story 1.3 (embedding & vector search) - Future
- Story for clustering & linking - Future
- Email digest infrastructure - Future

**Estimated Effort:** 5-7 days (MVP), 10-15 days (full feature)

**Future Enhancements:**
- Integration with Twitter/X API for thread recommendations
- Reddit integration (relevant subreddit discussions)
- ArXiv integration for academic papers
- YouTube video recommendations (with transcripts)
- Podcast episode recommendations (via podcast search APIs)
- Real-time notifications for high-priority recommendations

---

## Backlog Items

(Additional future features can be added here as they are identified)

---

**Last Updated:** 2024-10-19
**Next Review:** After MVP completion
