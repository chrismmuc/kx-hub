# 8. Future Features & Backlog

This section captures potential features and enhancements for future iterations beyond the MVP.

## Post-MVP Feature Ideas

### 8.1 Additional Data Sources

#### 8.1.1 DayOne Journal Import
**Status:** Idea
**Priority:** Medium
**Complexity:** Medium

**Description:**
Import personal journal entries from the DayOne app to include in the knowledge base alongside Readwise highlights.

**Technical Approach:**
- DayOne has no public API
- Implementation via **local file upload**:
  - User exports DayOne journal as JSON (DayOne supports JSON export)
  - Upload JSON file to Cloud Storage bucket (e.g., `gs://kx-hub-uploads/dayone/`)
  - Cloud Function triggered on file upload
  - Parse DayOne JSON format and normalize to standard markdown
  - Store in `gs://kx-hub-markdown-normalized/journal/{id}.md`
  - Process through existing embedding pipeline

**Frontmatter Schema for Journal Entries:**
```yaml
---
id: "dayone-{uuid}"
title: "Journal Entry - {date}"
source: "dayone"
type: "journal"
created_at: "{timestamp}"
updated_at: "{timestamp}"
tags: ["journal", "{mood}", "{location}"]
location: "{lat},{lng}" (if available)
weather: "{weather}" (if available)
photos: ["photo1.jpg", "photo2.jpg"] (if available)
entry_count: 1
---
```

**Considerations:**
- Privacy: Journal entries are highly personal - ensure proper access controls
- Photo handling: DayOne entries may include photos - decide if/how to store
- Deduplication: Prevent duplicate imports
- Date range selection: Allow users to select which date ranges to import
- Incremental updates: Support importing new entries without re-uploading everything

**Dependencies:**
- Story 1.2 (normalization pipeline) âœ… Complete
- Story 1.3 (embedding & storage) - Future

**Estimated Effort:** 2-3 days

---

### 8.2 Intelligent Content Discovery

#### 8.2.1 Current Article Recommendations & Follow-ups
**Status:** Idea
**Priority:** High
**Complexity:** High

**Description:**
Proactively search for and propose current articles that build upon or follow up on existing knowledge base content. Combine with cross-topic detection to discover interesting connections and validate what's already available.

**Key Capabilities:**

1. **Follow-up Detection:**
   - Analyze existing highlights/articles to identify key topics, authors, concepts
   - Use web search APIs (Google Custom Search API, Bing Search API) to find recent articles
   - Filter for articles published after the original highlight date
   - Rank by relevance and novelty

2. **Cross-Topic Connection Discovery:**
   - Use semantic embeddings to find unexpected connections between clusters
   - Example: "This article about urban planning mentions concepts from your behavioral psychology cluster"
   - Surface articles that bridge multiple existing clusters

3. **Knowledge Gap Analysis:**
   - Identify topics with many questions but few answers
   - Suggest articles that fill these gaps
   - Example: "You have 10 highlights questioning X, here are 3 recent articles explaining X"

4. **Validation & Verification:**
   - Check if recommended content already exists in knowledge base
   - Detect near-duplicates (same article from different sources)
   - Flag contradictions or updates to outdated information

**Technical Approach:**

```
1. Scheduled Job (weekly):
   â†“
2. Extract key entities/topics from recent highlights
   â†“
3. Generate search queries (Gemini LLM)
   â†“
4. Web Search API calls (Google Custom Search)
   â†“
5. Candidate article URLs
   â†“
6. Fetch article content (web scraping/API)
   â†“
7. Embed article snippets (Vertex AI)
   â†“
8. Semantic similarity matching
   â†“
9. Rank by: relevance, recency, novelty, cross-cluster connections
   â†“
10. Store recommendations in Firestore
    â†“
11. Present in weekly digest email OR query interface
```

**Data Model Extensions:**

**Firestore `kb_recommendations` collection:**
```javascript
{
  recommendation_id: "rec-{uuid}",
  type: "follow_up" | "cross_topic" | "gap_fill" | "update",
  title: "Article title",
  url: "https://...",
  source: "google_search" | "twitter" | "reddit",
  published_date: "2024-10-19",
  related_items: ["item-123", "item-456"], // IDs from kb_items
  related_clusters: ["cluster-ai", "cluster-psychology"],
  connection_explanation: "This article discusses...", // Generated by LLM
  similarity_score: 0.87,
  novelty_score: 0.92,
  status: "pending" | "accepted" | "rejected" | "saved",
  created_at: "2024-10-19T10:00:00Z"
}
```

**Configuration (`config/settings.yml`):**
```yaml
content_discovery:
  enabled: true
  schedule: "0 9 * * SUN"  # Weekly on Sunday 9am
  max_recommendations_per_week: 10
  min_similarity_score: 0.75
  search_apis:
    - provider: "google_custom_search"
      api_key_secret: "/kx-hub/google-search/api-key"
      cx: "your-search-engine-id"
      max_results: 20
  lookback_days: 30  # Only process highlights from last 30 days
  cross_cluster_threshold: 0.70  # Similarity threshold for cross-cluster connections
```

**User Experience:**

1. **Weekly Digest Section:**
   ```
   ## ðŸ“š Recommended Reading

   ### Follow-ups to Your Highlights
   - "The Future of AI Regulation (2024)" - Builds on your highlights from "AI Ethics"
   - "New Research on Sleep Quality" - Updates your notes from "Why We Sleep"

   ### Interesting Connections
   - "Urban Design for Mental Health" - Bridges your clusters: Architecture + Psychology
   ```

2. **Query Interface:**
   ```
   > query "AI regulation"

   Results:
   1. [Your highlights] Article: "AI Ethics Principles" (2023)
   2. [Recommended] "The Future of AI Regulation" (2024) â­ NEW
      â†’ Builds on your existing highlights, published 6 months later
   ```

3. **Push to Readwise Reader:**
   - Automatically add recommended articles to Readwise Reader queue
   - Use Readwise Reader API to save URLs
   - Tag recommendations with: `kx-hub-recommended`, `follow-up`, or `cross-topic`
   - Batch save to avoid API rate limits
   - User can read/highlight in Reader, which feeds back into the pipeline

**Readwise Reader API Integration:**

The recommendations can be pushed directly to your Readwise Reader queue, creating a closed-loop system where:
1. You highlight articles in Reader
2. System finds follow-up articles
3. System pushes recommendations back to Reader
4. You read and highlight recommended articles
5. Cycle continues with deeper knowledge building

**API Configuration:**
```yaml
readwise_reader:
  api_key_secret: "/kx-hub/readwise-reader/api-key"
  auto_push_recommendations: true
  max_push_per_week: 10
  tags: ["kx-hub-recommended"]
```

**Reader API Endpoint:**
```
POST https://readwise.io/api/v3/save/
Headers:
  Authorization: Token {api_key}
Body:
  {
    "url": "https://article-url.com",
    "tags": ["kx-hub-recommended", "follow-up"],
    "category": "article",
    "location": "new"  // Adds to "New" section
  }
```

**Flow:**
```
Weekly Discovery Job
    â†“
Generate Recommendations
    â†“
Store in Firestore (kb_recommendations)
    â†“
[Optional] Push to Readwise Reader API
    â†“
User reads in Reader app
    â†“
User highlights â†’ Readwise API
    â†“
Daily Ingest picks up highlights
    â†“
Cycle continues
```

This creates a **self-reinforcing knowledge loop** where the system actively feeds you relevant content in your existing reading workflow.

**API Costs Estimate:**
- Google Custom Search API: $5/1000 queries, ~100 queries/week = ~$2/month
- Article content fetching: Web scraping (free) or diffbot.com API ($0.25/1000 pages)
- LLM for query generation + explanations: ~500 tokens/week Ã— $0.075/1M tokens = negligible

**Total Additional Cost:** ~$2-3/month

**Considerations:**
- **Rate Limiting:** Web search APIs have daily quotas
- **Content Quality:** Filter out low-quality content (clickbait, paywalls)
- **User Feedback Loop:** Allow users to mark recommendations as helpful/not helpful
- **Privacy:** Don't send personal journal entries to external search APIs
- **Deduplication:** Complex - same article may have multiple URLs
- **Freshness vs Relevance:** Balance between very recent and highly relevant

**Dependencies:**
- Story 1.3 (embedding & vector search) - Future
- Story for clustering & linking - Future
- Email digest infrastructure - Future

**Estimated Effort:** 5-7 days (MVP), 10-15 days (full feature)

**Future Enhancements:**
- Integration with Twitter/X API for thread recommendations
- Reddit integration (relevant subreddit discussions)
- ArXiv integration for academic papers
- YouTube video recommendations (with transcripts)
- Podcast episode recommendations (via podcast search APIs)
- Real-time notifications for high-priority recommendations

---

## 8.3 Epic 4: Knowledge Digest & Email Summaries

**Status:** Planned (see [epics.md](./epics.md) for full details)
**Priority:** High
**Complexity:** High

**Description:**
Build an AI-powered knowledge digest system that regularly summarizes content from the Knowledge Base and Reader Inbox, delivering comprehensive email summaries (~half DIN A4 page per topic) with key insights, actionable takeaways, and one-click Reader integration.

**Key Capabilities:**

1. **KB Digest Engine (Story 4.1)**
   - Rich summaries with Key Aspects bullets (5-7 points) and detailed narrative (300-500 words)
   - Cluster-based grouping for thematic coherence
   - Notable quotes and cross-references

2. **Reader Inbox Summarization (Story 4.2)**
   - Summarize unread articles from Reader inbox
   - Recommend: "Deep read" | "Summary sufficient" | "Archive"
   - Help clear inbox backlog without guilt

3. **Weekly Email Digest (Story 4.3)**
   - Scheduled delivery (daily/weekly/biweekly)
   - Sections: KB Growth, Inbox Intelligence, Knowledge Connections
   - One-click Readwise Reader deep links (desktop + mobile)

4. **On-Demand MCP Tools (Story 4.4)**
   - Generate digests interactively via Claude Desktop
   - Format options: detailed, brief, bullets
   - Instant access without waiting for scheduled emails

5. **Personalization & Preferences (Story 4.5)**
   - Configurable schedule, depth, and focus areas
   - Priority/muted clusters
   - Secure unsubscribe mechanism

6. **Analytics & Feedback (Story 4.6)**
   - Track engagement (open rates, click-through)
   - Quality feedback collection
   - Continuous improvement loop

**Technical Approach:**
- Gemini 2.0 Pro for multi-document synthesis
- SendGrid for email delivery (free tier: 100/day)
- Readwise Reader deep links for one-click save
- Cloud Scheduler for timing

**Cost Analysis:**
| Component | Monthly Cost |
|-----------|-------------|
| Gemini Pro (synthesis) | ~$0.30 |
| Gemini Flash (inbox) | ~$0.20 |
| SendGrid | $0 (free tier) |
| Firestore | ~$0.05 |
| **Total** | **~$0.56/month** |

**Dependencies:**
- Epic 3 (Story 3.5/3.6 - Reading Recommendations & Email infrastructure)
- Readwise Reader API access

**Estimated Effort:** 12-15 days total

---

## 8.4 Epic 5: AI-Powered Blogging Engine

**Status:** Planned (see [epics.md](./epics.md) for full details)
**Priority:** Medium
**Complexity:** Very High

**Description:**
Build an intelligent blogging assistant that transforms Knowledge Base content into polished blog articles. Supports the full workflow from idea extraction to Obsidian publication, with multi-session article development and Claude Code integration for editing.

**Key Capabilities:**

1. **Blog Idea Extraction (Story 5.1)**
   - Identify article-worthy topics from KB clusters
   - Generate title suggestions and pitches
   - Cross-cluster synthesis opportunities

2. **Outline Generation (Story 5.2)**
   - Structured article frameworks with source references
   - Templates: Thought Leadership, Tutorial, Synthesis, Opinion
   - Gap identification for additional research

3. **AI-Assisted Drafting (Story 5.3)**
   - Generate polished prose with KB citations
   - Configurable voice and style
   - Section-by-section or full draft generation

4. **Article Development Log (Story 5.4)**
   - Track progress: idea â†’ outlined â†’ drafting â†’ published
   - Multi-session development with version history
   - Resume articles across sessions

5. **Series & Consolidation (Story 5.5)**
   - Plan article sequences
   - Combine multiple articles into long-form content
   - Remove redundancy, add transitions

6. **Obsidian Export (Story 5.6)**
   - YAML frontmatter + wikilinks
   - Bidirectional links to source KB items
   - VS Code integration

7. **Claude Code Integration (Story 5.7)**
   - Edit drafts in VS Code with AI assistance
   - KB context for fact-checking
   - Sync changes back to kx-hub

**Technical Approach:**
- Gemini 2.0 Pro for long-form generation
- Firestore for article state management
- Markdown output for Obsidian compatibility
- MCP tools for interactive workflow

**Cost Analysis:**
| Component | Monthly Cost |
|-----------|-------------|
| Gemini Pro | ~$0.50 |
| Firestore | ~$0.05 |
| **Total** | **~$0.56/month** |

**Dependencies:**
- Epic 4 (Story 4.1 - KB Digest Engine)
- Obsidian vault configuration

**Estimated Effort:** 18-22 days total

---

## 8.5 Epic 6: User Experience & Discoverability

**Status:** Decision Pending (see [epics.md](./epics.md) for full details)
**Priority:** High
**Complexity:** Medium-High

**Description:**
Address system complexity by improving tool discoverability and reducing cognitive load. As the system has grown to 30+ MCP tools, users face a "Too Many Tools" problem where they cannot easily discover or remember available capabilities.

**Problem Statement:**
- Claude's tool selection accuracy degrades significantly with >30 tools
- Token overhead can reach 100K+ tokens just for tool definitions
- Users must memorize tool names to use features effectively
- No visual navigation or guided workflows

**Decision Options Under Evaluation:**

| Option | Approach | Effort | Cost |
|--------|----------|--------|------|
| **A: Minimal Web Interface** | Firebase-hosted SPA with dashboard, action buttons, results viewer | 8-12 days | ~$0-2/month |
| **B: Obsidian Plugin** | TypeScript plugin with sidebar panel, command palette, note actions | 12-18 days | $0 |
| **C: Focused MCP + Workflow Tools** | Consolidate 30+ tools into 5-7 mega-tools with discovery | 6-10 days | $0 |

**Recommendation:** Option C - Start with Focused MCP approach, add visual UI later if needed.

**Key Research Findings:**
- Anthropic's Tool Search Tool (beta) can reduce token overhead by 85%
- Workflow-oriented tools (`what_can_i_do()`, `explore_knowledge()`, `weekly_ritual()`) improve discoverability
- Can evolve to add Web UI (Option A) later as enhancement

**Dependencies:**
- Epic 5 complete (for full tool inventory)
- User decision on preferred option

**Estimated Effort:** 6-18 days (depending on option selected)

---

## 8.6 Future Epics (Beyond Epic 6)

### Epic 7: Export & Distribution
**Status:** Backlog
**Priority:** Medium

- GitHub export (Markdown + graph.json)
- Static knowledge graph visualization
- Public sharing options

### Epic 8: Advanced Integrations
**Status:** Backlog
**Priority:** Low

- DayOne Journal import (see 8.1.1)
- Multi-source integration (Pocket, Instapaper)
- Mobile companion app for quick capture

### Epic 9: Analytics & Insights
**Status:** Backlog
**Priority:** Low

- Reading habit analytics and trends
- Knowledge growth tracking over time
- Cluster evolution visualization
- Personal knowledge graph statistics
- Content production metrics (from Epic 5)

---

## Backlog Items

(Additional future features can be added here as they are identified)

---

**Last Updated:** 2025-12-17
**Next Review:** After Epic 6 decision
